# GIS 空间分析

## 空间分析概述

### 空间分析的概念

##### 空间分析

- 在空间算法支持下；
- 以地学原理为依托；
- 根据空间对象空间分布特征；
- 获取空间对象信息；
- 预测其未来发展趋势；

##### 复杂性表现

- 空间关系；
- 类型；
- 空间现象；
- 机制；

### 空间分析的类型

##### 依据数据模型划分

- 基于场模型的空间分析；
- 基于对象模型的空间分析；
- 基于网络模型的空间分析；
- 基于时空模型的空间分析；

---

##### 依据数据维度划分

- 二维空间分析；
- 2.5 维空间分析：TIN；
- 多维空间分析；

---

##### 依据空间分析级别划分

- 基础空间分析；
  - 叠置分析；
  - 缓冲区分析；
  - 窗口分析；
  - 网络分析；
- 空间统计分析；
- 智能化空间分析；

## 空间对象基本度量方法

### 几何度量

**长度测算**

##### 矢量数据结构计算公式

- 假设坐标对(x，y，z)；
- $L=\sum^{n-1}_{l=0}[(x_{i+1}-x_i)^2+(y_{i+1}-y_i)^2+(z_{i+1}-z_i)^2]^{\frac{1}{2}}$；

##### 栅格数据结构计算

- 通过栅格数目；
- 采用 8 方向连接，对角线方向乘以根二；

---

**面积和周长度量**

##### 矢量数据结构计算公式

- 设 n 个顶点，其坐标为(x，y)；
- $S=\frac{1}{2}\sum^{n-1}_{i=1}(x_iy_{i+1}-x_{i+1}y_i)$；

**有孔和岛的多边形**: 外多边形 - 内多边形.  
**周长计算公式**: 线段累加.  
**栅格数据结构计算**: 栅格计数;

---

**曲率和弯曲度**

##### 曲率

- 曲线的局部特征；
- $K=\frac{y^{''}}{(1+y^{'2})^{3/2}}$；

##### 弯曲度

- 曲线的弯曲程度；
- 曲线长度与曲线首尾端点定义线段长度之比；

---

**质心**: 一个多边形的几何中心

---

**最小边界几何图形**  
**凸包**: 包含所有数据点的最小凸多边形.  
**最小边界包络矩形**: 几何体的最小外接矩形 (边必须在水平或垂直方向上);

### 距离度量

**均值空间距离度量**  
**广义公式**: $d=[\sum^n_{i=1}(x_i-x_{i+1})^q]^{1/q}$.  
**曼哈顿距离**: q = 1.  
**欧氏距离**: q = 2.  
**契比雪夫距离**: q 趋于无穷;

---

**非均质空间距离度量**: 函数距离;

- 表达式的变化；
- 研究区域的变化；

### 方向度量

##### 方向度量

- 定量
  - 方位角；
  - 象限角；
- 定性
  - 4 方向；
  - 8 方向；
  - 16 方向；

## 叠置分析

##### 叠置分析

- 多个数据层产生一个新数据层；
- 新图层综合所有原数据层所具有的属性；
- 生成新的空间关系和属性关系；

##### 数据层要求

- 相同坐标系；
- 相同基准面；
- 相同区域；

##### 分类

- 维度；
  - 二维缓冲区；
  - 三维缓冲区；
- 数据结构；
  - 栅格缓冲区；
  - 矢量缓冲区；

### 矢量数据的叠置分析

##### 点和多边形叠置

- 点图层和多边形图层；
- 面图层属性注入点图层；

---

##### 线和多边形叠置

- 线图层和多边形图层；
- 面图层属性注入线图层中；

---

##### 多边形叠置

- 多个多边形图层叠加，产生一个新的多边形图层；
- 新图层多边形是原来各图层多边形相交分割的结果；
- 新图层各多边形包含原图层各多边形的所有属性数据；
- 新图层各多边形具有新的属性数据；

##### 碎屑多边形问题

- 由于数字化误差；
- 多边形之间不会完全重合；
- 生成细小多边形；

**去除方法**: 设置模糊容差值;

### 栅格数据的叠置分析

**栅格数据的叠置分析**: 像元值之间的各种运算;

##### 分类

- 布尔运算：交，或，并，差；
- 重分类：将属性数据的类别合并或转换成新类；
- 数学运算；
  - 算术运算；
  - 函数运算；

### 三维叠置分析

- 点，线，面之间；
- 进行布尔逻辑运算：交，并，差；

## 缓冲区分析

##### 缓冲区分析

- 点，线，面等空间实体；
- 建立周围一定宽度范围的缓冲区域；
- 空间数据在水平方向扩展；

##### 分类

- 维度；
  - 二维缓冲区；
  - 三维缓冲区；
- 数据结构；
  - 栅格缓冲区；
  - 矢量缓冲区；

### 矢量缓冲区分析

##### 矢量缓冲区的类型

- 点缓冲区；
- 线缓冲区；
- 面缓冲区；
  - 内缓冲区；
  - 外缓冲区；

### 栅格缓冲区分析

**优势场景**: 非均质空间;

### 三维缓冲区分析

## 窗口分析

##### 窗口分析

- 对于栅格数据；
- 建立固定半径的分析窗口；
- 进行统计运算或函数运算；
- 空间数据在水平方向扩展；

##### 基本要素

- 中心点；
- 分析窗口大小与类型；
- 运算方式；

### 分析窗口的类型

- 矩形窗口；
- 圆形窗口；
- 环形窗口；
- 扇形窗口；
- 其他窗口；

### 窗口分析的类型

##### 统计运算

- 平均值统计；
- 最值统计；
- 中值统计；
- 求和统计；
- 范围统计；
- 多数统计；
- 少数统计；

---

**函数运算**: 函数或关系式;

- 滤波运算；
- 地形参数运算；

## 网络分析

##### 网络分析

- 通过模拟，分析网络，资源的状态；
- 研究网络结构，资源流动等优化问题；

### 矢量网络分析

##### 矢量网络的组成

- 链；
- 点状要素；

##### 矢量网络中的属性

- 阻强：资源在网络流动的阻力大小；
- 资源容量：点存储或提供的资源总量；
- 资源需求量：点或链存储或提供的实时资源量；

##### 矢量网络的建立

- 建立点文件和线文件，形成网络文件；
- 建立拓扑关系；
- 赋于网络属性值；

##### 矢量网络的应用

- 路径分析；
  - 最短路径；
  - 静态最佳路径；
  - 动态最佳路径；
- 资源分配；
- 最佳选址；

##### 劣势

- 数据结构复杂；
- 算法复杂；
- 维护困难；

### 栅格网络分析

**栅格网络分析**: 应用地图代数;

##### 优势

- 算法效率高；
- 始于动态变化情景；
- 维护简单；
